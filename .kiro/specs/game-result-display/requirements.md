# Requirements Document

## Introduction

「アナーキーオセロ」のゲーム結果表示機能に関する要件定義書。現在、両プレイヤーに合法手がなくなった時点でゲームが無言で停止する問題を解決し、ゲーム終了の検出・勝敗判定・結果表示を実装する。子供向けのわかりやすい結果表示により、ゲーム体験を完結させる。

## Requirements

### Requirement 1: ゲーム終了判定

**Objective:** プレイヤーとして、ゲームが終了したことを自動的に検出してほしい。ゲームがいつ終わったか明確にわかるようにするため。

#### Acceptance Criteria

1. When 手番終了後に両プレイヤーとも合法手がない場合, the アナーキーオセロ shall ゲーム状態を「終了」に遷移させる
2. When ゲームが終了状態に遷移した時, the アナーキーオセロ shall 盤面上の黒石と白石の数を比較して勝者を判定する
3. When 黒石と白石の数が同数の場合, the アナーキーオセロ shall 結果を「引き分け」と判定する
4. While ゲームが終了状態の間, the アナーキーオセロ shall 石の配置や裏返し操作を受け付けない

### Requirement 2: ゲーム結果画面の表示

**Objective:** プレイヤーとして、ゲーム終了時に勝敗結果をわかりやすく確認したい。誰が勝ったかをすぐに理解できるようにするため。

#### Acceptance Criteria

1. When ゲームが終了した時, the アナーキーオセロ shall 結果画面をモーダルまたはオーバーレイ形式で表示する
2. The アナーキーオセロ shall 勝者の色（黒勝ち・白勝ち）または引き分けを結果画面に表示する
3. The アナーキーオセロ shall 最終スコア（黒石数・白石数）を結果画面に表示する
4. The アナーキーオセロ shall 子供が理解しやすいシンプルで大きな文字と視覚的な表現で結果を表示する

### Requirement 3: ゲーム終了後の操作

**Objective:** プレイヤーとして、ゲーム終了後にスムーズに次のアクションに移りたい。新しいゲームをすぐに始められるようにするため。

#### Acceptance Criteria

1. When 結果画面が表示された時, the アナーキーオセロ shall 「もう一回あそぶ」ボタンを表示する
2. When プレイヤーが「もう一回あそぶ」ボタンを押した時, the アナーキーオセロ shall ゲームをリセットして初期状態から新しいゲームを開始する
3. When プレイヤーが結果画面の外側をクリックした時, the アナーキーオセロ shall 結果画面を閉じて最終盤面を確認できるようにする
4. While 結果画面が閉じられた状態でゲームが終了状態の間, the アナーキーオセロ shall 結果を再確認できる手段を提供する

### Requirement 4: ゲーム終了時のUI更新

**Objective:** プレイヤーとして、ゲーム終了時に手番やフェーズ表示が適切に更新されてほしい。ゲームの状態を正しく把握するため。

#### Acceptance Criteria

1. When ゲームが終了した時, the アナーキーオセロ shall 手番表示を非表示にするかゲーム終了メッセージに切り替える
2. When ゲームが終了した時, the アナーキーオセロ shall 「手番終了」ボタンを非表示にするか非活性にする
3. When ゲームが終了した時, the アナーキーオセロ shall スコアボードに勝者をハイライト表示する

### Requirement 5: アクセシビリティ

**Objective:** プレイヤーとして、キーボードやスクリーンリーダーでもゲーム結果を確認したい。すべてのプレイヤーがゲーム結果にアクセスできるようにするため。

#### Acceptance Criteria

1. When 結果画面が表示された時, the アナーキーオセロ shall フォーカスを結果画面内に移動する
2. The アナーキーオセロ shall 結果画面内のボタンにキーボード操作（Enter/Space）でアクセスできるようにする
3. The アナーキーオセロ shall 結果画面に適切なARIA属性（`role="dialog"`, `aria-label`）を設定する
4. When 結果画面が表示された時, the アナーキーオセロ shall 勝敗結果をスクリーンリーダーに通知する

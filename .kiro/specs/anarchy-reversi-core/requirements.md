# Requirements Document

## Introduction

「アナーキーオセロ」のコア機能に関する要件定義書。通常のリバーシルールに沿った石の配置と、自由な裏返し操作（アナーキー要素）を組み合わせた子供向けWeb版リバーシゲームを実現する。

MVPではローカル2人対戦（同一デバイス）でコアなゲーム体験を検証し、オンライン対戦機能は後続フェーズで追加する。

## Requirements

### Requirement 1: ゲームボード表示

**Objective:** プレイヤーとして、8x8のリバーシ盤面を画面上で確認したい。直感的に石の配置状況を把握できるようにするため。

#### Acceptance Criteria

1. The アナーキーオセロ shall 8x8（64マス）のグリッド形式でゲームボードを表示する
2. The アナーキーオセロ shall 各セルの状態を黒石・白石・空の3種類で視覚的に区別して表示する
3. When ゲームが初期化された時, the アナーキーオセロ shall 中央4マス（d4=白, e4=黒, d5=黒, e5=白）に初期配置を行う
4. The アナーキーオセロ shall スマートフォン・タブレット・デスクトップの各画面サイズに対応したレスポンシブな盤面表示を提供する
5. The アナーキーオセロ shall 子供が操作しやすい十分な大きさのセルタッチターゲットを確保する

### Requirement 2: 石の配置と手番管理

**Objective:** プレイヤーとして、通常ルールに沿って石を配置した後、相手の石を手動で自由に裏返したい。配置ルールは守りつつ、裏返しの自由度（アナーキー要素）を楽しむため。

#### Acceptance Criteria

1. The アナーキーオセロ shall 現在の手番（黒番・白番）を管理し、画面上に表示する
2. When ゲームが初期化された時, the アナーキーオセロ shall 黒番から開始する
3. The アナーキーオセロ shall 自分の石で相手の石を挟める空きセルのみを配置可能な位置として判定する
4. The アナーキーオセロ shall 配置可能な位置をプレイヤーに視覚的に示す
5. When プレイヤーが配置可能な空きセルをクリックした時, the アナーキーオセロ shall そのセルに手番の色の石を1つ配置する
6. When 石が配置された後, the アナーキーオセロ shall プレイヤーが相手の石をクリックして手動で自分の色に裏返せる状態に遷移する
7. While 裏返しフェーズ中, the アナーキーオセロ shall プレイヤーが相手の石をクリックするたびにその石を自分の色に裏返す
8. While 裏返しフェーズ中, the アナーキーオセロ shall プレイヤーが裏返し済みの石（自分の色に変更した石）をクリックした時、その石を相手の色に戻す
9. The アナーキーオセロ shall 裏返しフェーズ中の裏返し回数や対象に制限を設けない
10. While 裏返しフェーズ中かつ1個以上の石を裏返している時, the アナーキーオセロ shall 「手番終了」ボタンを活性化する
11. While 裏返しフェーズ中かつ裏返した石が0個の時, the アナーキーオセロ shall 「手番終了」ボタンを非活性にする
12. When プレイヤーが「手番終了」ボタンを押した時, the アナーキーオセロ shall 手番を相手に切り替える（黒番→白番、白番→黒番）
10. If 現在の手番のプレイヤーに配置可能な位置がない場合, then the アナーキーオセロ shall 自動的にパスして相手の手番に切り替える
11. When セルが操作された時, the アナーキーオセロ shall 即座に視覚的なフィードバックを提供する

### Requirement 3: スコア表示

**Objective:** プレイヤーとして、黒石と白石の数をリアルタイムで確認したい。ゲームの状況を把握するため。

#### Acceptance Criteria

1. The アナーキーオセロ shall 盤面上の黒石の数と白石の数をスコアとして常時表示する
2. When 盤面の石が変更された時, the アナーキーオセロ shall スコアを即座に再計算して表示を更新する
3. The アナーキーオセロ shall 黒石と白石のスコアを視覚的に区別して表示する

### Requirement 4: ゲームリセット

**Objective:** プレイヤーとして、ゲームをリセットして最初からやり直したい。新しいゲームを開始するため。

#### Acceptance Criteria

1. When プレイヤーがリセットを要求した時, the アナーキーオセロ shall 盤面を初期状態（中央4マス配置）に戻す
2. When ゲームがリセットされた時, the アナーキーオセロ shall スコア表示を初期状態に更新する
3. When ゲームがリセットされた時, the アナーキーオセロ shall 手番を黒番に初期化する
